"use strict";var pug=require("pug"),util=require("./handler-util"),contents=[];function handle(t,n){switch(t.method){case"GET":n.writeHead(200,{"Content-Type":"text/html; charset=utf-8"}),n.end(pug.renderFile("./views/posts.pug",{contents:contents}));break;case"POST":var o=[];t.on("data",function(e){o.push(e)}).on("end",function(){o=Buffer.concat(o).toString();var e=decodeURIComponent(o).split("content=")[1];console.info("投稿されました: "+e),contents.push(e),console.info("投稿された全内容: "+contents),handleRedirectPosts(t,n)});break;default:util.handleBadRequest(t,n)}}function handleRedirectPosts(e,t){t.writeHead(303,{Location:"/posts"}),t.end()}module.exports={handle:handle};